amends "@gha/Workflow.pkl"

import "../shared/base.pkl"

name = "Build"

on {
  push {
    `tags-ignore` {
      "*"
    }
  }
}

jobs {
  ["test"] = (base.baseJob){
    name = "Build and test"
    steps {
      new {
        name = "Publish test results"
        uses = "EnricoMi/publish-unit-test-result-action@v2"
        with {
          ["files"] = "build/test-results/**/*.xml"
          ["comment"] = "off"
        }
      }
    }
  }
}
